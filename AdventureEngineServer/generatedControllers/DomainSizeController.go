//*** CAUTION ***
//This is an autogenerated file produced by regenerateBackend.py.
//Edits made here will not persist after backend regeneration.

package generatedControllers
import (
   "github.com/gin-gonic/gin"
   "gorm.io/gorm"
   "strconv"
   "net/http"
   services "AdventureEngineServer/generatedServices"
   types "AdventureEngineServer/generatedDatabaseTypes"
   dtos "AdventureEngineServer/generatedDTOs"
)

func GetDomainSizes(ctx *gin.Context, db *gorm.DB) {
   var serviceBuffer []types.DomainSize
   err := services.GetDomainSizes(db, &serviceBuffer)
   if err != nil {
      ctx.IndentedJSON(http.StatusInternalServerError, err.Error())
      return
   }
   
   var returnBuffer []dtos.DomainSizeDTO
   for _, dbTypeInstance := range serviceBuffer {
      pointerToDTO := dtos.DomainSizeToDomainSizeDTO(db, &dbTypeInstance, []string{})
      if (pointerToDTO != nil) {
         returnBuffer = append(returnBuffer, *pointerToDTO)
      }
   }
   ctx.IndentedJSON(http.StatusOK, returnBuffer)
}

func GetDomainSizeById(ctx *gin.Context, db *gorm.DB) {
   id := ctx.Param("id")
   idNum, err := strconv.Atoi(id)
   if err != nil {
      ctx.IndentedJSON(http.StatusInternalServerError, err.Error())
      return
   }
   var serviceBuffer types.DomainSize
   err = services.GetDomainSizeById(db, idNum, &serviceBuffer)
   if err != nil {
      ctx.IndentedJSON(http.StatusInternalServerError, err.Error())
      return
   }
   
   returnBuffer := dtos.DomainSizeToDomainSizeDTO(db, &serviceBuffer, []string{})
   ctx.IndentedJSON(http.StatusOK, returnBuffer)
}

func SaveDomainSize(ctx *gin.Context, db *gorm.DB) {
   var DTOBuffer dtos.DomainSizeDTO
   var serviceBuffer types.DomainSize
   
   if err := ctx.ShouldBindJSON(&DTOBuffer); err != nil {
      ctx.IndentedJSON(http.StatusBadRequest, err.Error())
      return
   }
   
   serviceBuffer = dtos.DomainSizeDTOToDomainSize(&DTOBuffer)
   
   if err := services.SaveDomainSize(db, &serviceBuffer); err != nil {
      ctx.IndentedJSON(http.StatusInternalServerError, err.Error())
      return
   }
   
   returnBuffer := dtos.DomainSizeToDomainSizeDTO(db, &serviceBuffer, []string{})
   if DTOBuffer.Id != nil {
      ctx.IndentedJSON(http.StatusOK, returnBuffer)
   } else {
      ctx.IndentedJSON(http.StatusCreated, returnBuffer)
   }
}
